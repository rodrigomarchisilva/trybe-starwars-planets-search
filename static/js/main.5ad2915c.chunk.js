(this["webpackJsonpstarwars-planets-search"]=this["webpackJsonpstarwars-planets-search"]||[]).push([[0],{18:function(e,t,a){e.exports=a(28)},24:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);a(19);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),s=(a(24),a(1)),o=a(33),u=a(31),i=a(13),m=a(6),d=Object(n.createContext)(),p=function(e){var t=e.children,a=Object(n.useState)({filterByName:"",numericColumnFilters:[],numericColumnOptions:["diameter","orbital_period","population","rotation_period","surface_water"],order:{column:"name",sort:"ASC"}}),c=Object(m.a)(a,2),l=c[0],s=c[1];return r.a.createElement(d.Provider,{value:{filters:l,setFilters:s}},t)},f=function(){var e=Object(n.useContext)(d);if(!e)throw new Error("useFilters must be used within a FiltersProvider");return e},b=a(7),v=a(17);function E(e){var t=e.propsObject,a=t.dataTestid,n=t.value,c=t.onChange,l=t.options;return o.a.Select.defaultProps={value:n,onChange:c,size:"sm"},r.a.createElement(o.a.Select,{"data-testid":a},l.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))}function h(){var e=f(),t=e.filters,a=e.setFilters,c=t.numericColumnFilters,l=t.numericColumnOptions,u=Object(n.useState)("diameter"),d=Object(m.a)(u,2),p=d[0],h=d[1],O=Object(n.useState)("maior que"),j=Object(m.a)(O,2),C=j[0],g=j[1],k=Object(n.useState)("0"),y=Object(m.a)(k,2),N=y[0],x=y[1];Object(n.useEffect)((function(){h(l[0])}),[l]);var w={xs:3,sm:4,xl:2,className:"p-1"},S={xs:3,sm:4,xl:2,className:"p-1"},F={xs:3,sm:2,xl:1,className:"p-1"},P={xs:3,sm:2,xl:1,className:"d-grid p-1"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,w,r.a.createElement(E,{propsObject:{dataTestid:"column-filter",value:p||"",onChange:function(e){var t=e.target;return h(t.value)},options:l}})),r.a.createElement(i.a,S,r.a.createElement(E,{propsObject:{dataTestid:"comparison-filter",value:C,onChange:function(e){var t=e.target;return g(t.value)},options:["maior que","menor que","igual a"]}})),r.a.createElement(i.a,F,r.a.createElement(o.a.Control,{type:"number","data-testid":"value-filter",value:N,onChange:function(e){var t=e.target;return x(t.value)},size:"sm"})),r.a.createElement(i.a,P,r.a.createElement(v.a,{type:"button","data-testid":"button-filter",onClick:function(){var e=Object(b.a)(l).filter((function(e){return e!==p})),n={column:p,comparison:C,value:N};a(Object(s.a)(Object(s.a)({},t),{},{numericColumnFilters:[].concat(Object(b.a)(c),[n]),numericColumnOptions:e}))},disabled:0===l.length,size:"sm",variant:"secondary",className:"border-light"},"Filtrar")))}var O=a(29),j=a(30);function C(){var e=f(),t=e.filters,a=e.setFilters,n=t.numericColumnFilters,c=t.numericColumnOptions,l=n.length>0?"d-block":"d-none";return r.a.createElement(O.a,{className:"".concat(l," ps-1 pe-1")},n.map((function(e,l){var o=e.column,u=e.comparison,i=e.value;return r.a.createElement(v.a,{className:"mb-2 ms-1 me-1 rounded-1 border border-secondary",size:"sm",key:l,variant:"dark","data-testid":"filter"},r.a.createElement(j.a,{className:"me-2",bg:"danger",role:"button",onClick:function(){return function(e){var r=Object(b.a)(n).filter((function(t){return t.column!==e}));a(Object(s.a)(Object(s.a)({},t),{},{numericColumnFilters:r,numericColumnOptions:[].concat(Object(b.a)(c),[e]).sort()}))}(o)}},"X"),"".concat(o," \xe9 ").concat(u," ").concat(i))})))}var g=Object(n.createContext)(),k=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(!1),u=Object(m.a)(o,2),i=u[0],d=u[1];return Object(n.useEffect)((function(){d(!0),fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()})).then((function(e){var t=e.results.map((function(e){return delete e.residents,e}));s(t),d(!1)}))}),[]),r.a.createElement(g.Provider,{value:{planets:l,loading:i}},t)},y=function(){var e=Object(n.useContext)(g);if(!e)throw new Error("usePlanets must be used within a PlanetsProvider");return e};function N(e){var t=e.propsObject,a=t.value,n=t.onChange,c=t.checked,l=t.dataTestid;return o.a.Check.defaultProps={label:a,id:a,type:"radio",value:a,name:"sort-type",onChange:n,checked:c,size:"sm"},r.a.createElement(o.a.Check,{"data-testid":l})}function x(){var e=Object(n.useState)("name"),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("ASC"),o=Object(m.a)(l,2),u=o[0],d=o[1],p=y().planets,b=f(),h=b.filters,O=b.setFilters,j=["no_options_available"];p.length>0&&(j=Object.keys(p[0]));var C=function(e){var t=e.target;u!==t.value&&d(t.value)},g={xs:3,sm:2,xl:1,className:"p-1"},k={xs:3,sm:2,xl:1,className:"d-flex justify-content-center align-items-center p-1"},x={xs:3,sm:2,xl:1,className:"d-flex justify-content-center align-items-center p-1"},w={xs:3,sm:2,xl:1,className:"d-grid p-1"},S={dataTestid:"column-sort",value:a,onChange:function(e){var t=e.target;return c(t.value)},options:j},F={value:"ASC",onChange:C,checked:"ASC"===u,dataTestid:"column-sort-input-asc"},P={value:"DESC",onChange:C,checked:"DESC"===u,dataTestid:"column-sort-input-desc"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,g,r.a.createElement(E,{propsObject:S})),r.a.createElement(i.a,k,r.a.createElement(N,{propsObject:F})),r.a.createElement(i.a,x,r.a.createElement(N,{propsObject:P})),r.a.createElement(i.a,w,r.a.createElement(v.a,{type:"button",onClick:function(){O(Object(s.a)(Object(s.a)({},h),{},{order:{column:a,sort:u}}))},"data-testid":"column-sort-button",size:"sm",variant:"secondary",className:"border border-light"},"Ordenar")))}function w(){var e=f(),t=e.filters,a=e.setFilters,n={xs:12,sm:4,xl:2,className:"p-1"};return r.a.createElement("header",null,r.a.createElement("h1",{id:"title"},"Star Wars"),r.a.createElement("h3",{id:"subtitle"},"Planets Search"),r.a.createElement(o.a,null,r.a.createElement(u.a,{className:"m-1"},r.a.createElement(i.a,n,r.a.createElement(o.a.Control,{type:"text",placeholder:"Filtrar por nome","data-testid":"name-filter",value:t.filterByName,onChange:function(e){var n=e.target;a(Object(s.a)(Object(s.a)({},t),{},{filterByName:n.value}))},size:"sm"})),r.a.createElement(x,null),r.a.createElement(h,null))),r.a.createElement(C,null))}var S=a(32),F=a(34);function P(){return i.a.defaultProps={xs:4},r.a.createElement("div",null,Array.from({length:13}).map((function(e,t){return r.a.createElement(u.a,{className:"ms-1 mb-2 me-1",key:t},Array.from({length:3}).map((function(e,t){return r.a.createElement(F.a,{as:i.a,className:"ps-1 pe-1",key:t,animation:"glow"},r.a.createElement(F.a,{size:"lg",className:"rounded-1 p-3 w-100"}))})))})))}var z=function(e,t){var a;switch(t){case"url":a="0".concat(e[t].slice(44)).slice(-3).toLowerCase();break;case"surface_water":case"orbital_period":case"diameter":case"rotation_period":case"population":a="unknown"===e[t]?e[t].toLowerCase():"000000000000".concat(e[t]).slice(-13).toLowerCase();break;case"films":a=e[t][0].toLowerCase();break;default:a=e[t].toLowerCase()}return a},A=function(e,t){return e.sort((function(e,a){var n=z(e,t.column),r=z(a,t.column);return n<r?"ASC"===t.sort?-1:1:n>r?"ASC"===t.sort?1:-1:0}))};function _(){var e=y(),t=e.planets,a=e.loading,n=f().filters,c=n.filterByName,l=n.numericColumnFilters,s=n.order;if(a||t.length<1)return r.a.createElement(P,null);var o=function(e,t){var a=e;return""!==t&&(a=Object(b.a)(e).filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))),a}(t,c);return o=function(e,t){var a=Object(b.a)(e);return t.length>0&&t.forEach((function(e){a="maior que"===e.comparison?a.filter((function(t){var a=t[e.column];return parseInt(a,10)>e.value})):"menor que"===e.comparison?a.filter((function(t){var a=t[e.column];return parseInt(a,10)<e.value})):a.filter((function(t){return t[e.column]===e.value}))})),a}(o,l),o=A(o,s),r.a.createElement(S.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",size:"sm",responsive:!0,className:"border-secondary"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(t[0]).map((function(e,t){return r.a.createElement("th",{key:t,className:"pe-2 ps-2"},e)})))),r.a.createElement("tbody",null,o.map((function(e,t){var a=Object.keys(e).map((function(t,a){var n;switch(t){case"name":n=r.a.createElement("td",{key:a,"data-testid":"planet-name",className:"pe-2 ps-2"},e[t]);break;case"films":n=r.a.createElement("td",{key:a,className:"pe-2 ps-2"},r.a.createElement("ul",null,e[t].map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("a",{href:e},"Film ".concat(e.replace(/\D+/g,""))))}))));break;case"url":n=r.a.createElement("td",{key:a,className:"pe-2 ps-2"},r.a.createElement("a",{href:e[t]},"Planet ".concat(e[t].replace(/\D+/g,""))));break;default:n=r.a.createElement("td",{key:a,className:"pe-2 ps-2"},e[t])}return n}));return r.a.createElement("tr",{key:t},a)}))))}var L=function(){return r.a.createElement(k,null,r.a.createElement(p,null,r.a.createElement(w,null),r.a.createElement(_,null)))};l.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.5ad2915c.chunk.js.map